<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–¢–µ—Å—Ç ¬´–í—ñ—Ä—Ç—É–∞–ª—å–Ω–∏–π –∫–ª—ñ—î–Ω—Ç¬ª</title>
    <link rel="icon" type="image/png" href="/static/main/ikonka.png">
    <style>
/* === RESET === */
*, *::before, *::after {
  box-sizing: border-box;
}

html, body {
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

/* === BASE === */
body {
background-image: url("/static/main/fon.jpg");
  background-image: linear-gradient(
        rgba(0, 0, 0, 0.250), 
        rgba(0, 0, 0, 0.800)
      ),
      url("/static/main/fon.jpg");
  background-size: cover;         /* –∞–±–æ contain ‚Äî –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –±–∞–∂–∞–Ω–æ–≥–æ –µ—Ñ–µ–∫—Ç—É */
  background-repeat: no-repeat;
  background-position: center;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  padding: 20px;
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: center;
  background-color: #ffffff;
  color: #000000;
  padding-top: 140px;
}

.top-panel {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: 750px;
  max-width: 1000px;

  display: flex;
  flex-direction: column;
  align-items: center;         /* –ø–æ —Ü–µ–Ω—Ç—Ä—É –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—ñ */
  justify-content: center;     /* –ø–æ —Ü–µ–Ω—Ç—Ä—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—ñ */

  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.3),
    rgba(255, 255, 255, 0.05)
  );
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);

  padding: 16px 24px;
  border-radius: 20px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
  z-index: 500;
  text-align: center;
}

.background-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background-color: rgba(0, 0, 0, 0.742); /* –∞–±–æ 0.2-0.5 */
  z-index: -1;
}

/* === HEADER === */
h1 {
  color: #ffffff;
  text-align: center;
  padding: 5px;
  font-size: clamp(18px, 4vw, 24px);
  margin: 0.5em 0;
}

/* === CHAT CONTAINER === */
.chat-container {
  background: transparent;
  backdrop-filter: none;
  border-radius: 0;
  box-shadow: none;
  padding: 20px;
  max-height: 50dvh;
  overflow-y: auto;
  display: flex;
  flex: 1;
  flex-direction: column;
  flex-grow: 1;
  pointer-events: auto;
}

.chat-shell {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);

  width: 750px;
  max-width: 1000px;
  height: 28vh;
  overflow: hidden;

  display: flex;
  flex-direction: column;

  background: linear-gradient(to top, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.05));
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);

  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  z-index: 999;
}

/* === MESSAGES === */
.message {
  margin-bottom: 15px;
  padding: 10px 15px;
  border-radius: 18px;
  max-width: 80%;
  line-height: 1.4;
  animation: fadeIn 0.3s ease;
  word-wrap: break-word;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}
.bot-message {
  background-color: #e0e0e0;
  color: #333;
  align-self: flex-start;
  border-radius: 18px 18px 5px 18px;
}
.user-message {
  background-color: #ff6f00;
  color: white;
  align-self: flex-end;
  border-radius: 18px 18px 18px 5px;
}

/* === INPUT AREA === */
.input-area {
  display: flex;
  gap: 10px;
  padding: 16px 20px;
  background: transparent;
  border-top: 1px solid rgba(255, 255, 255, 0.2); /* —Ç–æ–Ω–∫–∞ –º–µ–∂–∞ */
}
#user-input {
  flex-grow: 1;
  padding: 12px;
  border: 1px solid #ddd;
  border-radius: 20px;
  font-size: clamp(14px, 3vw, 16px);
  min-height: 20px;
  max-height: 120px;
  resize: vertical;
  pointer-events: auto;
}
#user-input:disabled::placeholder {
    color: #999; /* –°—ñ—Ä–∏–π –∫–æ–ª—ñ—Ä, —â–æ –¥–æ–±—Ä–µ –≤–∏–¥–Ω–æ –Ω–∞ –±—ñ–ª–æ–º—É —Ñ–æ–Ω—ñ */
    opacity: 1; /* –§—ñ–∫—Å—É—î –ø—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —É –¥–µ—è–∫–∏—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö –≤–æ–Ω–∞ –∑–Ω–∏–∂—É—î—Ç—å—Å—è) */
}

#user-input:disabled {
    background-color: #f5f5f5; /* –°–≤—ñ—Ç–ª–æ-—Å—ñ—Ä–∏–π —Ñ–æ–Ω –¥–ª—è –≤–∏–º–∫–Ω–µ–Ω–æ–≥–æ –ø–æ–ª—è */
    border-color: #ddd; /* –ú–µ–∂–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç—É */
}
#send-button {
  background-color: #ff6f00;
  color: white;
  border: none;
  padding: 0 clamp(10px, 3vw, 20px);
  border-radius: 20px;
  cursor: pointer;
  font-size: clamp(14px, 3vw, 16px);
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  min-width: 60px;
  height: 44px;
}

#send-button:hover {
  background-color: #e65c00;
}
#send-button:disabled {
  background-color: #cccccc;
  cursor: not-allowed;
}

#record-btn {
  background-color: #ff3c00;
  color: white;
  border: none;
  padding: 0 clamp(10px, 3vw, 20px);
  border-radius: 20px;
  cursor: pointer;
  font-size: clamp(14px, 3vw, 16px);
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  min-width: 60px;
  height: 44px;
}

.record-btn:hover {
  background-color: #ffd900;
}
.record-btn:disabled {
  background-color: #cccccc;
  cursor: not-allowed;
}

/* === STAGE INDICATOR === */
.stage-indicator-single {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 6px 12px;
  border-radius: 16px;
  margin-top: 12px;
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  width: 540px;
  max-width: 800px;
  font-weight: bold;
  font-size: 14px;
  color: white;
  transition: all 0.3s ease;
}

.recording-indicator {
  color: red;
  font-weight: bold;
  margin-top: 10px;
}

.stage-indicator-single .stage {
  opacity: 0;
  transform: translateY(10px);
  animation: fadeStage 0.4s forwards;
}

@keyframes fadeStage {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* === STATUS / TYPING === */
.status {
  font-style: italic;
  font-size: clamp(12px, 2.5vw, 14px);
  color: #ffffff;
  text-align: center;
  width: 90%;
  max-width: 800px;
  margin: 0 auto;
}
.typing-indicator {
  display: inline-block;
  padding: 10px;
  margin-left: 10px;
}
.typing-dot {
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background-color: #999;
  margin: 0 2px;
  animation: typingAnimation 1.4s infinite ease-in-out;
}
.typing-dot:nth-child(1) { animation-delay: 0s; }
.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes typingAnimation {
  0%, 60%, 100% { transform: translateY(0); }
  30% { transform: translateY(-5px); }
}

.modal-content input {
    width: 100%;
    padding: 12px;
    margin: 10px 0;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 16px;
}

.modal-content button {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    font-size: 16px;
    cursor: pointer;
}

/* === RESTART BUTTON === */
#restart-button {
  display: none;
  position: fixed;
  top: 15px;
  right: 15px;
  z-index: 9999;
  background-color: #ff4d4f;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 10px 14px;
  font-size: clamp(12px, 2.5vw, 14px);
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
#restart-button:hover {
  background-color: #ff0000a5;
}

.chat-blur-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 40px;
  pointer-events: none;

  background: transparent;
  mask-image: linear-gradient(to bottom, black 0%, transparent 100%);
  -webkit-mask-image: linear-gradient(to bottom, black 0%, transparent 100%);

  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  z-index: 5;
}

#choose-model-btn {
  display: none;
  position: absolute;
  right: 80px; /* –í—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—é —á–∞—Ç—É */
  bottom: 50%; /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–µ —Ü–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è */
  transform: translateY(50%);
  z-index: 999;
  background-color: #ff6f00;
  color: white;
  border: none;
  border-radius: 25px 25px 25px 25px; /* –°–∫—Ä—É–≥–ª–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ –∑–ª—ñ–≤–∞ */
  padding: 25px 25px 25px 25px;
  font-size: clamp(14px, 3vw, 16px);
  text-align: center;
  font-weight: bold;
  cursor: pointer;
  box-shadow: -4px 4px 12px rgba(0, 0, 0, 0.15);
  transition: all 0.3s ease;
  white-space: nowrap;
  max-width: 200px;
}

#choose-model-btn:hover {
  background-color: #e65c00;
  right: 80px; /* –ó—Å—É–≤–∞—î–º–æ –±–ª–∏–∂—á–µ –¥–æ —á–∞—Ç—É –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ */
  box-shadow: -2px 4px 16px rgba(0, 0, 0, 0.2);
}

/* === MODELS SELECTION === */
#models-container {
  display: none;
  margin-top: 15px;
  text-align: center;
  width: 90%;
  max-width: 800px;
  margin: 15px auto 0;
}
#models-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  margin-top: 10px;
}
.model-button {
  min-width: 180px;
  flex: 0 0 auto;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 10px;
  background-color: #fff;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: transform 0.2s ease;
}
.model-button:hover {
  background-color: #ff6f00;
  transform: scale(1.03);
}

/* === MODEL OVERLAY === */
.model-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: rgba(0, 0, 0, 0.6);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}
.model-selector {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  max-width: 90%;
  overflow: hidden;
}
.models-scroll {
  display: flex;
  overflow-x: auto;
  gap: 16px;
  padding: 10px;
  scroll-behavior: smooth;
  max-width: 80vw;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
  scrollbar-color: #ccc transparent;
}
.arrow {
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
  user-select: none;
  padding: 10px;
  color: #333;
}
.arrow:hover {
  color: #ff6600;
}

  @keyframes modalFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes modalFadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
  }

  @keyframes contentScaleIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  /* –û—Å–Ω–æ–≤–Ω—ñ —Å—Ç–∏–ª—ñ */
  .model-detail-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    animation: modalFadeIn 0.3s ease-out forwards;
  }

  .model-detail-modal.closing {
    animation: modalFadeOut 0.3s ease-out forwards;
  }
  
  .model-detail-content {
    background: white;
    padding: 20px;
    border-radius: 12px;
    width: 90vw;
    max-width: 400px; /* –§—ñ–∫—Å–æ–≤–∞–Ω–∞ —à–∏—Ä–∏–Ω–∞ */
    max-height: 90vh; /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –≤–∏—Å–æ—Ç–∞ */
    padding: 2vh 2vw;
    position: relative;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    transform: scale(0.95);
    opacity: 0;
    animation: contentScaleIn 0.3s ease-out 0.1s forwards; /* –í–∏–º–∫–Ω–µ–Ω–Ω—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */
    display: flex;
    flex-direction: column;
  }
  
  .model-detail-main {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    overflow: hidden; /* –ó–∞–ø–æ–±—ñ–≥–∞—î–º–æ –≤–∏—Ö–æ–¥—É –∫–æ–Ω—Ç–µ–Ω—Ç—É */
  }
  
  .model-detail-image {
    width: 50vmin; /* –ö–æ–º–±—ñ–Ω–∞—Ü—ñ—è vw —ñ vh */
    height: 50vmin;
    max-width: 300px;
    max-height: 300px;
    object-fit: contain; 
    padding: 0; /* –ü—Ä–∏–±–∏—Ä–∞—î–º–æ –≤—ñ–¥—Å—Ç—É–ø–∏ */
    margin: 10px 0; /* –í—ñ–¥—Å—Ç—É–ø–∏ –∑–≤–µ—Ä—Ö—É —Ç–∞ –∑–Ω–∏–∑—É */
  }
  
  .model-detail-title {
    font-size: 20px;
    font-weight: bold;
    color: #333;
    text-align: center;
    margin: 0;
    padding: 0 10px 8px;
    border-bottom: 2px solid #ff6f00;
    width: 100%;
  }
  
  .model-detail-specs {
    width: 100%;
    padding: 0 10px;
    margin: 5px 0;
    flex-grow: 1;
    overflow: hidden; /* –ó–∞–ø–æ–±—ñ–≥–∞—î–º–æ –ø—Ä–æ–∫—Ä—É—Ç—Ü—ñ */
  }
  
  .model-detail-specs ul {
    padding-left: 20px;
    margin: 0;
  }
  
  .model-detail-specs li {
    margin-bottom: 8px;
    line-height: 1.4;
    padding: 4px 0;
    font-size: 15px;
  }

  .model-detail-specs li:last-child {
    margin-bottom: 0;
  }

  .model-detail-close {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 24px;
    cursor: pointer;
    color: #666;
    z-index: 1;
  }

  /* –ê–¥–∞–ø—Ç–∞—Ü—ñ—è –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö */
  @media (max-width: 500px) {
    .model-detail-content {
      width: 90%;
      padding: 1.5vh 1.5vw;
    }
    
    .model-detail-image {
      width: 25vmin;
      height: 25vmin;
      box-shadow: 0 3px 10px rgba(0,0,0,0.15); /* –ú–µ–Ω—à–∞ —Ç—ñ–Ω—å –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö */
    }
    
    .model-detail-title {
        font-size: calc(16px + 0.5vw);

    }
    
    .model-detail-specs li {
      font-size: calc(14px + 0.3vw);
    }
  }

  @media (max-width: 300px) {
    .model-detail-specs li {
      font-size: calc(12px + 0.3vw);
    }
  }

  /* –°—Ç–∏–ª—ñ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ" */
  .detail-view-btn {
    background: #ff3c00;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
    font-size: 14px;
    transition: all 0.3s;
    width: auto;
    align-self: center;
  }
  
  .detail-view-btn:hover {
    background: #ffc400;
    transform: scale(1.05);
  }

/* === PROGRESS === */
.progress-hint {
  color: #ffffff;
  font-size: clamp(10px, 2vw, 12px);
  text-align: center;
  width: 90%;
  max-width: 800px;
  margin: 3px auto;
}
.progress-container {
  margin-top: 10px;
  width: 90%;
  max-width: 800px;
  height: 10px;
  background-color: #eee;
  border-radius: 5px;
  overflow: hidden;
  transition: opacity 0.5s ease;
}
.progress-bar {
  height: 100%;
  width: 0%;
  background-color: #4caf50;
  transition: width 0.3s ease-out;
  animation: pulse 1.5s infinite;
}
@keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.7; }
  100% { opacity: 1; }
}
.fade-out {
  opacity: 0;
  transition: opacity 1s ease-out;
}

/* === MODAL === */
.modal {
  position: fixed;
  z-index: 9999;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 1;
  visibility: visible;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}
.modal.hidden {
  opacity: 0;
  visibility: hidden;
}
.modal-content {
  background: #ff6f00;
  padding: 20px 30px;
  border-radius: 8px;
  width: 90%;
  max-width: 400px;
  text-align: left;
  overflow-y: auto;
}
.modal-content h2 {
  font-size: clamp(18px, 4vw, 22px);
}
.modal-content ul {
  font-size: clamp(14px, 3vw, 16px);
  padding-left: 20px;
}
.modal-content button {
  padding: 20px 30px;
  font-weight: bold;
  font-size: clamp(14px, 3vw, 16px);
  cursor: pointer;
}

/* –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Å—Ç–∏–ª—ñ –¥–ª—è –ø—ñ–¥–∫–∞–∑–∫–∏ */
#model-hint-modal .modal-content {
  background: #4CAF50; /* –ó–µ–ª–µ–Ω–∏–π –∫–æ–ª—ñ—Ä –¥–ª—è –ø—ñ–¥–∫–∞–∑–∫–∏ */
  text-align: center;
}

#client-character {
  position: fixed;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%) translateY(20px); /* —Ç—Ä–æ—Ö–∏ –Ω–∏–∂—á–µ –Ω–∞ —Å—Ç–∞—Ä—Ç—ñ */
  opacity: 0;
  z-index: 501;
  animation: fadeInUp 0.5s ease-out 1.0s forwards; /* 1.5s –∑–∞—Ç—Ä–∏–º–∫–∞ */
}

@keyframes fadeInUp {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

#model-hint-modal button {
  background: white;
  color: #4CAF50;
  border: none;
  margin-top: 15px;
  border-radius: 5px;
}

#model-hint-modal.hidden {
  display: none;
}

.recording-indicator {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 14px;
    z-index: 1000;
    animation: pulse 1.5s infinite;
}

@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

/* ===== –ú–û–ë–Ü–õ–¨–ù–ê –ê–î–ê–ü–¢–ê–¶–Ü–Ø ===== */
@media (max-width: 900px) {
    html, body {
    background-image: url("/static/main/fon.jpg");
    background-image: linear-gradient(
        rgba(0, 0, 0, 0.5), 
        rgba(0, 0, 0, 0.5)
      ),
      url("/static/main/fon.jpg");
    background-size: cover;         /* –∞–±–æ contain ‚Äî –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –±–∞–∂–∞–Ω–æ–≥–æ –µ—Ñ–µ–∫—Ç—É */
    background-repeat: no-repeat;
    background-position: center;
    overflow-x: hidden;
    overflow-y: auto;
    width: 100%;
    height: 100%;
    position: fixed; /* –§—ñ–∫—Å—É—î–º–æ —Ä–æ–∑–º—ñ—Ä–∏ */
    touch-action: pan-y; /* –¢—ñ–ª—å–∫–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∏–π —Å–∫—Ä–æ–ª */
    -webkit-overflow-scrolling: touch; /* –ü–ª–∞–≤–Ω–∏–π —Å–∫—Ä–æ–ª –¥–ª—è iOS */
  }

  /* –ó–∞–ø–æ–±—ñ–≥–∞—î –ø—ñ–¥—Å–∫–∞–∫—É–≤–∞–Ω–Ω—é –∫–æ–Ω—Ç–µ–Ω—Ç—É –ø—Ä–∏ —Ñ–æ–∫—É—Å—ñ –Ω–∞ input */
  input, textarea {
    touch-action: manipulation;
  }

  /* –§—ñ–∫—Å—É—î–º–æ —á–∞—Ç —É –º–µ–∂–∞—Ö –µ–∫—Ä–∞–Ω—É */
  .chat-container {
    max-height: calc(100dvh - 200px); /* –í—Ä–∞—Ö–æ–≤—É—î –≤–∏—Å–æ—Ç—É —ñ–Ω—à–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ */
    overflow-y: auto;
  }

  /* –î–æ–¥–∞—Ç–∫–æ–≤–∏–π —Ñ—ñ–∫—Å –¥–ª—è iOS */
  .chat-shell {
    -webkit-overflow-scrolling: touch;
  }

  #choose-model-btn {
    right: -100px;
    padding: 12px 12px 12px 20px;
    font-size: 14px;
  }
}

@media (max-width: 600px) {

  .top-panel {
    width: 95%;
    padding: 12px 16px;
    border-radius: 12px;
  }

  .stage-indicator-single {
    width: auto;
    font-size: 12px;
    padding: 4px 10px;
  }

  .progress-hint {
    font-size: 11px;
  }

  .progress-container {
    height: 8px;
  }

  .chat-shell {
    width: 100%;
    left: 0;
    transform: none;
    border-radius: 0;
    bottom: 0;
    height: 42vh;
  }

  .chat-container {
    padding: 10px;
    max-height: 30vh;
  }

  .message {
    max-width: 95%;
    padding: 8px 12px;
    font-size: 14px;
  }

  .input-area {
    flex-direction: column;
    padding: 10px;
    gap: 6px;
  }

  #user-input {
    padding: 10px;
    font-size: 14px;
    min-height: 30px;
  }

  #send-button {
    width: 100%;
    height: 42px;
    font-size: 14px;
  }

  #record-btn {
    width: 100%;
    height: 42px;
    font-size: 14px;
  }

  #client-character img {
    max-height: 280px;
  }

  .modal-content {
    width: 95%;
    padding: 15px 20px;
  }

  .modal-content button {
    padding: 15px 20px;
    font-size: 14px;
  }

  #choose-model-btn {
    right: 10px;
    bottom: 60%;
    padding: 14px;
    font-size: 13px;
    max-width: 150px;
    white-space: normal;
  }
}

@media (max-width: 768px) {
    .model-selector {
        flex-direction: column;
        max-height: 80vh;
        overflow-y: auto;
    }
    
    .models-scroll {
        flex-direction: column;
        overflow-x: hidden;
        overflow-y: auto;
        max-height: 60vh;
        width: 100%;
    }
    
    #modelLeftArrow, #modelRightArrow {
        display: none; /* –ü—Ä–∏—Ö–æ–≤—É—î–º–æ —Å—Ç—Ä—ñ–ª–∫–∏ –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö */
    }
    
    .close-btn {
        margin-left: 0;
        margin-top: 10px;
    }
}

@media (max-width: 768px) {
  #client-character {
    bottom: auto;  
    top: 15%; 
    left: 50%;
    transform: translate(-50%, 0); 
    max-width: 90%;
  }
    
  #client-avatar {
    max-height: 60vh; 
    }
}

@media (min-width: 601px) and (max-width: 900px) {
  .chat-shell {
    width: 80%;
    height: 36vh;
  }

  .top-panel {
    width: 90%;
  }

  .message {
    font-size: 15px;
  }

  #send-button {
    font-size: 15px;
  }

  #record-btn {
    font-size: 15px;
  }

  .stage-indicator-single {
    font-size: 13px;
  }
}

</style>
</head>
<body>
<div class="top-panel">
  <div class="progress-hint" id="progressHint">–ë–∞–∂–∞—î–º–æ —É—Å–ø—ñ—Ö—ñ–≤ —É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—ó –∫–ª—ñ—î–Ω—Ç–∞!</div>
  <div class="progress-container" id="progressContainer">
    <div class="progress-bar" id="questionProgressBar"></div>
  </div>

  <div id="top-title-area">
    <h1 id="welcome-title">–ö–ª—ñ—î–Ω—Ç –∑–∞–π—à–æ–≤ –¥–æ –í–∞—à–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω—É...</h1>

    <div id="stage-indicator" class="stage-indicator-single" style="display: none;">
      <div id="stage-label" class="stage active">–ï—Ç–∞–ø: –í–∏—è–≤–ª–µ–Ω–Ω—è –ø–æ—Ç—Ä–µ–±–∏</div>
    </div>
  </div>
</div>

    <button id="choose-model-btn" style="display: none;">–û–±–µ—Ä—ñ—Ç—å –º–æ–¥–µ–ª—å</button>

    <div class="chat-shell">
      <div class="chat-blur-overlay"></div>
      <div class="chat-container" id="chat-container">
        <!-- –ß–∞—Ç –±—É–¥–µ –¥–æ–¥–∞–≤–∞—Ç–∏—Å—å —Å—é–¥–∏ -->
      </div>

    <div class="input-area">
        <input
            type="text"
            id="user-input"
            placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –≤–∞—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..."
            autocomplete="off"
        />
        <button id="send-button">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
        <button id="record-btn">üé§</button>
      </div>
    </div>

        <div id="recording-indicator" class="recording-indicator" style="display:none;">
          üéô –ô–¥–µ –∑–∞–ø–∏—Å...
        </div>

    <div id="client-character" style="
      display: none;
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1;
      opacity: 0;
      transition: opacity 0.2s ease;
    ">
      <img id="client-avatar" src="" alt="–ö–ª—ñ—î–Ω—Ç" style="
        max-height: 520px;
        border-radius: 16px;
        filter: drop-shadow(0 0 8px rgba(0,0,0,0.3));
      ">
    </div>

    <div id="auth-modal" class="modal">
      <div class="modal-content">
        <h2>–í–≤–µ–¥—ñ—Ç—å –≤–∞—à—ñ –¥–∞–Ω—ñ</h2>
        <p>1. –û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É:</p>
        <select 
            id="tool-category" 
            style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px;"
        >
          <option value="">-- –û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é --</option>
          <option value="screwdrivers">–®—É—Ä—É–ø–æ–≤–µ—Ä—Ç–∏</option>
          <option value="grinders">–ö–®–ú (–±–æ–ª–≥–∞—Ä–∫–∏)</option>
          <option value="hammers">–ü–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä–∏</option>
          <option value="inverters">–Ü–Ω–≤–µ—Ä—Ç–æ—Ä–∏</option>
          <option value="saws">–õ–∞–Ω—Ü—é–≥–æ–≤—ñ –ø–∏–ª–∏</option>
          <option value="trimmers">–¢—Ä–∏–º–µ—Ä–∏</option>
          <option value="sprayers">–û–±–ø—Ä–∏—Å–∫—É–≤–∞—á—ñ</option>
          <option value="exam">–ï–∫–∑–∞–º–µ–Ω (—É—Å—ñ —Å–∏—Ç—É–∞—Ü—ñ—ó)</option>
        </select>

        <p>2. –í–∫–∞–∂—ñ—Ç—å –≤–∞—à–µ –ü–Ü–ë –¥–ª—è –ø–æ—á–∞—Ç–∫—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—ó:</p>
        <input 
            type="text" 
            id="seller-name-input" 
            placeholder="–ü–Ü–ë (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –Ü–≤–∞–Ω–æ–≤ –Ü–≤–∞–Ω –Ü–≤–∞–Ω–æ–≤–∏—á)" 
            style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px;"
        >
        
        <button 
            id="submit-name-btn" 
            style="background-color: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;"
        >
          –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏
        </button>
      </div>
    </div>


    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤–∏–±–æ—Ä—É –º–æ–¥–µ–ª–µ–π (–∑–∞–ª–∏—à–∏–≤—Å—è, –∞–ª–µ –Ω–µ –ø–æ–∫–∞–∑—É—î–º–æ) -->
    <div id="models-container" style="display:none;">
        <p id="models-prompt"></p>
        <div id="models-buttons">
            <!-- –ö–Ω–æ–ø–∫–∏ –º–æ–¥–µ–ª–µ–π –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
        </div>
    </div>

    <!-- Overlay –¥–ª—è –≤–∏–±–æ—Ä—É –º–æ–¥–µ–ª–µ–π -->
    <div id="modelOverlay" class="model-overlay">
        <div class="model-selector">
            <div id="modelLeftArrow" class="arrow">‚Üê</div>
            <div id="modelsButtons" class="models-scroll"></div>
            <div id="modelRightArrow" class="arrow">‚Üí</div>
            <div id="close-model-overlay" class="arrow" style="margin-left: 10px;">‚úñ</div>
        </div>
    </div>

    <div class="status" id="status"></div>

    <div style="text-align: center;">
        <button id="restart-button">–ü–æ—á–∞—Ç–∏ –Ω–æ–≤–∏–π –¥—ñ–∞–ª–æ–≥</button>
    </div>

    <div id="model-hint-modal" class="modal hidden">
      <div class="modal-content">
        <h2>–ü–æ—Ä–∞–¥–∞</h2>
        <p>–¢–µ–ø–µ—Ä –≤–∏ –º–æ–∂–µ—Ç–µ –æ–±—Ä–∞—Ç–∏ –º–æ–¥–µ–ª—å —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É, —è–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø–æ—Ç—Ä–µ–±–∞–º –∫–ª—ñ—î–Ω—Ç–∞. –î–ª—è —Ü—å–æ–≥–æ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É: –û–±–µ—Ä—ñ—Ç—å –º–æ–¥–µ–ª—å. –ê–ª–µ –Ω–µ —Å–ø—ñ—à—ñ—Ç—å: —è–∫—â–æ –Ω–µ –≤–ø–µ–≤–Ω–µ–Ω—ñ —É –≤–∏–±–æ—Ä—ñ, –ø–æ—Å—Ç–∞–≤—Ç–µ –∫–ª—ñ—î–Ω—Ç–æ–≤—ñ —â–µ –¥–µ–∫—ñ–ª—å–∫–∞ –∑–∞–ø–∏—Ç–∞–Ω—å.</p>
        <button id="close-hint-btn">–ó—Ä–æ–∑—É–º—ñ–ª–æ</button>
      </div>
    </div>

    <div id="rules-modal" class="modal">
        <div class="modal-content">
            <h2>–ü—Ä–∞–≤–∏–ª–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó –∑ –±–æ—Ç–æ–º</h2>
            <ul>
                <li>–í–∞–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç—É–≤–∞—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞ –∑–≥—ñ–¥–Ω–æ —Ç—Ä—å–æ—Ö –µ—Ç–∞–ø—ñ–≤.</li>
                <li>–î–ª—è –ø–æ—á–∞—Ç–∫—É —Ä–æ–∑–º–æ–≤–∏ - –ø—Ä–∏–≤—ñ—Ç–∞–π—Ç–µ—Å—å —Ç–∞ –ø–æ—Å—Ç–∞–≤—Ç–µ —Ç—Ä–∏ –ø–æ—á–∞—Ç–∫–æ–≤–∏—Ö –ø–∏—Ç–∞–Ω–Ω—è.</li>
                <li>–ü—ñ—Å–ª—è —Ç—Ä—å–æ—Ö –∑–∞–ø–∏—Ç–∞–Ω—å –í–∞–º –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–±–æ—Ä—É —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É.</li>
                <li>–ù–µ –ø–∏—à—ñ—Ç—å –º–æ–¥–µ–ª—å —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É –≤—Ä—É—á–Ω—É - –Ω–∞—Ç–∏—Å–∫–∞–π—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É ¬´–û–±–µ—Ä—ñ—Ç—å –º–æ–¥–µ–ª—å¬ª</li>
                <li>–ù–∞–∑–≤–∏ –µ—Ç–∞–ø—ñ–≤ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –≤–≥–æ—Ä—ñ –¥–ª—è –≤—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É–≤–∞–Ω–Ω—è</li>
                <li>–ö–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è –∑ –±–æ—Ç–æ–º –ø–æ —á–∞—Å—É - –Ω–µ–æ–±–º–µ–∂–µ–Ω–∞.</li>
                <li>–¢—Ä–µ–Ω–µ—Ä –±—É–¥–µ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –í–∞—à—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ: —Å–ø—ñ–ª–∫—É–π—Ç–µ—Å—å –∞–¥–µ–∫–≤–∞—Ç–Ω–æ</li>
                <li>–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—Ä–æ–±–ª–µ–º–∏ ‚Äî –∑—Ä–æ–±—ñ—Ç—å —Å–∫—Ä—ñ–Ω—à–æ—Ç —Ç–∞ –Ω–∞–¥—ñ—à–ª—ñ—Ç—å —Ç—Ä–µ–Ω–µ—Ä—É.</li>
            </ul>
            <button id="accept-rules-btn">–Ø –æ–∑–Ω–∞–π–æ–º–∏–≤—Å—è —ñ –≥–æ—Ç–æ–≤–∏–π</button>
        </div>
    </div>

<div id="modelDetailModal" class="model-detail-modal">
  <div class="model-detail-content">
    <span class="model-detail-close">&times;</span>
    <div class="model-detail-main">
      <img id="detailModelImage" class="model-detail-image" src="" alt="–ú–æ–¥–µ–ª—å">
      <h2 id="detailModelTitle" class="model-detail-title"></h2>
      <div class="model-detail-specs">
        <ul id="detailModelSpecs">
          <!-- –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
        </ul>
      </div>
    </div>
  </div>
</div>

    <script>
        const chatContainer = document.getElementById("chat-container");
        const userInput = document.getElementById("user-input");
        const sendButton = document.getElementById("send-button");
        const statusElement = document.getElementById("status");
        const restartButton = document.getElementById("restart-button");
        const modelsContainer = document.getElementById("models-container");
        const modelsButtons = document.getElementById("modelsButtons"); // –û–Ω–æ–≤–ª–µ–Ω–æ, —â–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ overlay
        const modelsPrompt = document.getElementById("models-prompt");
        const progressHint = document.getElementById("progressHint");
        const questionProgressBar = document.getElementById("questionProgressBar");
        const modal = document.getElementById("rules-modal");
        const acceptBtn = document.getElementById("accept-rules-btn");
        const modelOverlay = document.getElementById("modelOverlay");
        const modelLeftArrow = document.getElementById("modelLeftArrow");
        const modelRightArrow = document.getElementById("modelRightArrow");

        // –ü–æ–¥—ñ—ó
        sendButton.addEventListener("click", sendMessage);
        userInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") sendMessage();
        });
        restartButton.addEventListener("click", () => window.location.reload());

        modelLeftArrow.onclick = () => {
            modelsButtons.scrollBy({ left: -300, behavior: "smooth" });
        };

        modelRightArrow.onclick = () => {
            modelsButtons.scrollBy({ left: 300, behavior: "smooth" });
        };

        function blockChat() {
            userInput.disabled = true;
            sendButton.disabled = true;
        }

        function unblockChat() {
            userInput.disabled = false;
            sendButton.disabled = false;
        }

        acceptBtn.addEventListener("click", () => {
            modal.classList.add("hidden");
            setTimeout(() => {
                modal.style.display = "none";
                unblockChat();
                userInput.focus();
            }, 300);
            unblockChat();
            userInput.focus();
        });

        function addMessage(text, isUser) {
            const messageDiv = document.createElement("div");
            messageDiv.classList.add("message");
            messageDiv.classList.add(isUser ? "user-message" : "bot-message");
            messageDiv.textContent = text;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function showTypingIndicator() {
            const typingDiv = document.createElement("div");
            typingDiv.classList.add("typing-indicator");
            typingDiv.id = "typing-indicator";
            typingDiv.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
            chatContainer.appendChild(typingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById("typing-indicator");
            if (typingIndicator) typingIndicator.remove();
        }

        function disableChat() {
            userInput.disabled = true;
            sendButton.disabled = true;
            hideModelButtons();
            statusElement.textContent = "–î—ñ–∞–ª–æ–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–æ";
        }

        function showStageIndicator() {
          const h1 = document.getElementById('welcome-title');
          const indicator = document.getElementById('stage-indicator');

          h1.style.display = 'none';
          indicator.style.display = 'flex'; // –∞–±–æ 'block' –¥–ª—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ –≤–∏–≥–ª—è–¥—É
        }

        function showModelHint() {
          const hintModal = document.getElementById("model-hint-modal");
          hintModal.classList.remove("hidden");
        }

        function hideModelHint() {
          const hintModal = document.getElementById("model-hint-modal");
          hintModal.classList.add("hidden");
        }

        // –û–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä–∏—Ç—Ç—è
        document.getElementById("close-hint-btn").addEventListener("click", hideModelHint);

        document.getElementById("close-model-overlay").addEventListener("click", hideModelButtons);

        let modelHintShown = false;

        // –û–Ω–æ–≤—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é updateProgressBar
       function updateProgressBar(progress, maxQuestions = 5) {
          const percent = (Math.min(progress, maxQuestions) / maxQuestions) * 100;
          questionProgressBar.style.width = `${percent}%`;

          if (progress < maxQuestions) {
              progressHint.textContent = `–ü—Ä–æ–≥—Ä–µ—Å –≤–∏—è–≤–ª–µ–Ω–Ω—è –ø–æ—Ç—Ä–µ–±–∏`;
              progressHint.style.opacity = "1";
              document.getElementById("progressContainer").style.opacity = "1";
              progressHint.style.display = "block";
              document.getElementById("progressContainer").style.display = "block";

              if (progress >= 3 && !modelHintShown) { // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —â–æ–± –∫–Ω–æ–ø–∫–∞ –∑'—è–≤–ª—è–ª–∞—Å—å –ø—ñ—Å–ª—è —Ç—Ä–µ—Ç—å–æ–≥–æ –ø–∏—Ç–∞–Ω–Ω—è —ñ –∑–∞–ª–∏—à–∞–ª–∞—Å—å
                  document.getElementById("choose-model-btn").style.display = "inline-block";
                  showModelHint();
                  modelHintShown = true; // –ü–æ–∑–Ω–∞—á–∞—î–º–æ, —â–æ –ø–æ—Ä–∞–¥—É –≤–∂–µ –ø–æ–∫–∞–∑–∞–ª–∏
              }
          } else {
              progressHint.textContent = "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–∏—Ç–∞–Ω—å!";
              setTimeout(() => {
                  progressHint.style.opacity = "0";
                  document.getElementById("progressContainer").style.opacity = "0";
              }, 1500);
              setTimeout(() => {
                  progressHint.style.display = "none";
                  document.getElementById("progressContainer").style.display = "none";
              }, 2000);
          }
      }

        function showModelButtons(models, promptText = "–û–±–µ—Ä—ñ—Ç—å –º–æ–¥–µ–ª—å:", attemptsLeft = 1) {
          modelsButtons.innerHTML = "";

          const modelData = {
              "CD-218Q": {
                  image: "/static/instruments/218Q.png",
                  specs: [
                      "24 –ù–º",
                      "–®–≤–∏–¥–∫–æ–∑'—î–º–Ω–∏–π –ø–∞—Ç—Ä–æ–Ω",
                      "–ô–¥–µ –±–µ–∑ –∞–∫—É–º—É–ª—è—Ç–æ—Ä–∞",
                      "–õ–µ–≥–∫–∏–π —Ç–∞ –∫–æ–º–ø–∞–∫—Ç–Ω–∏–π",
                  ],
              },
              "CD-12QX": {
                  image: "/static/instruments/CD12QX.png",
                  specs: [
                      "25 –ù–º",
                      "–ü–æ–≤–Ω–∏–π –∫–æ–º–ø–ª–µ–∫—Ç",
                      "–î–ª—è –Ω–µ—Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å",
                      "–ü–æ–≤–Ω–∏–π –∫–æ–º–ø–ª–µ–∫—Ç, –≤ –∞–∫—Ü—ñ—ó",
                  ],
              },
              "CD-201HBC": {
                  image: "/static/instruments/201HBC.png",
                  specs: [
                      "45 –ù–º",
                      "–ë–µ–∑—â—ñ—Ç–∫–æ–≤–∏–π –¥–≤–∏–≥—É–Ω",
                      "–î–ª—è —Ä–æ–±–æ—Ç–∏ –Ω–∞–≤—ñ—Ç—å —ñ–∑ —Ü–µ–≥–ª–æ—é",
                      "–ô–¥–µ –±–µ–∑ –∞–∫—É–º—É–ª—è—Ç–æ—Ä–∞",
                  ],
              },
              "CD-200BCULTRA": {
                  image: "/static/instruments/200BCULTRA.png",
                  specs: [
                      "60 –ù–º",
                      "–ú–µ—Ç–∞–ª–µ–≤–∏–π –ø–∞—Ç—Ä–æ–Ω",
                      "–ù–∞–π—Å–∏–ª—å–Ω—ñ—à–∏–π —à—É—Ä—É–ø–æ–≤–µ—Ä—Ç",
                      "–ô–¥–µ –±–µ–∑ –∞–∫—É–º—É–ª—è—Ç–æ—Ä–∞",
                  ],
              },
              "CD-200BCCOMPACT": {
                  image: "/static/instruments/CD-200BCCOMPACT.png",
                  specs: [
                      "40 –ù–º",
                      "–ú–µ—Ç–∞–ª–µ–≤–∏–π –ø–∞—Ç—Ä–æ–Ω",
                      "–ù–∞–π—Ç–æ—á–Ω—ñ—à–∏–π —à—É—Ä—É–ø–æ–≤–µ—Ä—Ç",
                      "–ô–¥–µ –±–µ–∑ –∞–∫—É–º—É–ª—è—Ç–æ—Ä–∞",
                  ],
              },
              "CD-12CX": {
                  image: "/static/instruments/CD12CX.png",
                  specs: [
                      "30 –ù–º",
                      "–ö–æ–º–ø–∞–∫—Ç–Ω–∏–π —Ç–∞ –Ω–µ–¥–æ—Ä–æ–≥–∏–π",
                      "–ü–ª–∞—Å—Ç–∏–∫–æ–≤–∏–π –ø–∞—Ç—Ä–æ–Ω",
                      "–ü–æ–≤–Ω–∏–π –∫–æ–º–ª–ø–µ–∫—Ç, –≤ –∞–∫—Ü—ñ—ó",
                  ],
              },
              "CD-12BC": {
                  image: "/static/instruments/CD-12BC.png",
                  specs: [
                      "40 –ù–º",
                      "–ú–µ—Ç–∞–ª–µ–≤–∏–π –ø–∞—Ç—Ä–æ–Ω",
                      "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ–º–ø–∞–∫—Ç–Ω–∏–π",
                      "–ô–¥–µ –±–µ–∑ –∞–∫—É–º—É–ª—è—Ç–æ—Ä–∞",
                  ],
              },
              "GS-140SE": {
                  image: "/static/instruments/gs140se.png",
                  specs: [
                      "1400 –í—Ç",
                      "125 –º–º –¥—ñ–∞–º–µ—Ç—Ä –¥–∏—Å–∫—É",
                      "–†–µ–≥—É–ª—é–≤–∞–Ω–Ω—è —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –æ–±–µ—Ä—Ç—ñ–≤",
                      "–ö–æ—Ä–æ—Ç–∫–∞ —Ä—É—á–∫–∞",
                  ],
              },
              "GL-160SE": {
                  image: "/static/instruments/gl160se.png",
                  specs: [
                      "1600 –í—Ç",
                      "150 –º–º –¥—ñ–∞–º–µ—Ç—Ä –¥–∏—Å–∫—É",
                      "–†–µ–≥—É–ª—é–≤–∞–Ω–Ω—è –æ–±–µ—Ä—Ç—ñ–≤ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø–æ—Ç—É–∂–Ω–æ—Å—Ç—ñ",
                      "–î–æ–≤–≥–∞ —Ä—É—á–∫–∞",
                  ],
              },
              "GS-98": {
                  image: "/static/instruments/gs98.png",
                  specs: [
                      "980 –í—Ç",
                      "125 –º–º –¥—ñ–∞–º–µ—Ç—Ä –¥–∏—Å–∫—É",
                      "–ù–∞–π–¥–µ—à–µ–≤—à–∞ —Ç–∞ –Ω–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∞ –ö–®–ú",
                      "–ö–æ—Ä–æ—Ç–∫–∞ —Ä—É—á–∫–∞",
                  ],
              },
              "GS-100S": {
                  image: "/static/instruments/gs100s.png",
                  specs: [
                      "1000 –í—Ç",
                      "125 –º–º –¥—ñ–∞–º–µ—Ç—Ä –¥–∏—Å–∫—É",
                      "–ö–æ–º–ø–∞–∫—Ç–Ω–∞ –ö–®–ú —ñ–∑ —Ä–µ–≥—É–ª—è—Ç–æ—Ä–æ–º –æ–±–µ—Ä—Ç—ñ–≤",
                      "–ö–æ—Ä–æ—Ç–∫–∞ —Ä—É—á–∫–∞",
                  ],
              },
              "GL-145S": {
                  image: "/static/instruments/GL145S.png",
                  specs: [
                      "1450 –í—Ç",
                      "125 –º–º –¥—ñ–∞–º–µ—Ç—Ä –¥–∏—Å–∫—É",
                      "–î–ª—è —Ä–æ–±—ñ—Ç –ø—ñ–¥–≤–∏—â–µ–Ω–æ—ó —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ",
                      "–î–æ–≤–≥–∞ —Ä—É—á–∫–∞ —Ç–∞ —Ä–µ–≥—É–ª—è—Ç–æ—Ä –æ–±–µ—Ä—Ç—ñ–≤",
                  ],
              },
              "GS-120S": {
                  image: "/static/instruments/GS120S.png",
                  specs: [
                      "1200 –í—Ç",
                      "125 –º–º –¥—ñ–∞–º–µ—Ç—Ä –¥–∏—Å–∫—É",
                      "–ü–ª–∞–≤–Ω–∏–π –ø—É—Å–∫ —Ç–∞ –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–º–∏–∫–∞–Ω–Ω—è",
                      "–ö–æ—Ä–æ—Ç–∫–∞ —Ä—É—á–∫–∞ —Ç–∞ —Ä–µ–≥—É–ª—è—Ç–æ—Ä –æ–±–µ—Ä—Ç—ñ–≤",
                  ],
              },
              "GL-240": {
                  image: "/static/instruments/GL240.png",
                  specs: [
                      "2400 –í—Ç",
                      "230 –º–º –¥—ñ–∞–º–µ—Ç—Ä –¥–∏—Å–∫—É",
                      "–î–ª—è —Ä—ñ–∑—É –Ω–∞–π—Ç–æ–≤—Å—Ç—ñ—à–∏—Ö –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤",
                      "–ü–æ–≤–æ—Ä–æ—Ç–Ω–∞ –¥–æ–≤–≥–∞ —Ä—É—á–∫–∞",
                  ],
              },
              "CG-12BC": {
                  image: "/static/instruments/cg12bc.png",
                  specs: [
                      "76 –º–º –¥—ñ–∞–º–µ—Ç—Ä –¥–∏—Å–∫—É",
                      "12V –±–æ–ª–≥–∞—Ä–∫–∞",
                      "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ–º–ø–∞–∫—Ç–Ω–∞",
                      "–ú–∞—î –ø–ª–∞–≤–Ω–∏–π –ø—É—Å–∫ —Ç–∞ –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ –≤–≤—ñ–º–∫–Ω–µ–Ω–Ω—è",
                  ],
              },
              "GL-125S": {
                  image: "/static/instruments/gl125s.png",
                  specs: [
                      "125 –º–º –¥—ñ–∞–º–µ—Ç—Ä –¥–∏—Å–∫—É",
                      "1250 –í—Ç",
                      "–ü—Ä–æ—Å—Ç–∞ —Ç–∞ –¥–µ—à–µ–≤–∞ –ö–®–ú",
                      "–î–æ–≤–≥–∞ —Ä—É—á–∫–∞",
                  ],
              },
              "DGA-201": {
                  image: "/static/instruments/dga201.png",
                  specs: [
                      "125 –º–º –¥—ñ–∞–º–µ—Ç—Ä –¥–∏—Å–∫—É",
                      "20V –º–æ–¥–µ–ª—å –ö–®–ú",
                      "–ó—Ä—É—á–Ω–∞, –ø—Ä–æ—Å—Ç–∞ —Ç–∞ –∞–≤—Ç–æ–Ω–æ–º–Ω–∞",
                      "–ù–µ–º–∞—î –∂–æ–¥–Ω–∏—Ö –æ—Å–æ–±–ª–∏–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π",
                  ],
              },
              "DHR-200": {
                  image: "/static/instruments/DHR200.png",
                  specs: [
                      "20V –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä",
                      "1.5 –î–∂ —Å–∏–ª–∞ —É–¥–∞—Ä—É",
                      "–ù–∞–π—Å–ª–∞–±—à–∏–π —Ç–∞ –Ω–∞–π–∫–æ–º–ø–∞–∫—Ç–Ω—ñ—à–∏–π",
                      "–ù–µ –º–∞—î —Ä–µ–∂–∏–º—É —Ä—É–π–Ω—É–≤–∞–Ω–Ω—è",
                  ],
              },
              "DHR-201BC": {
                  image: "/static/instruments/DHR201BC.png",
                  specs: [
                      "20V –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä",
                      "1.7 –î–∂ —Å–∏–ª–∞ —É–¥–∞—Ä—É",
                      "–ú–∞—î –±–µ–∑—â—ñ—Ç–∫–æ–≤–∏–π –¥–≤–∏–≥—É–Ω",
                      "–ú–∞—î —Ä–µ–∂–∏–º —Ä—É–π–Ω—É–≤–∞–Ω–Ω—è (—É–¥–∞—Ä—É)",
                  ],
              },
              "DHR-202BC": {
                  image: "/static/instruments/DHR202BC.png",
                  specs: [
                      "20V –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä",
                      "2.5 –î–∂ —Å–∏–ª–∞ —É–¥–∞—Ä—É",
                      "–ë–æ—á–∫–æ–≤–∏–π, –∑ –±–µ–∑—â—ñ—Ç–∫–æ–≤–∏–º –¥–≤–∏–≥—É–Ω–æ–º",
                      "–ê–Ω—Ç–∏–≤—ñ–±—Ä–∞—Ü—ñ–π–Ω–∞ —Ä—É—á–∫–∞",
                  ],
              },
              "RH-100": {
                  image: "/static/instruments/RH100.png",
                  specs: [
                      "–ü—Ä—è–º–∏–π –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä",
                      "2.6 –î–∂ —Å–∏–ª–∞ —É–¥–∞—Ä—É",
                      "–î–µ—à–µ–≤–∏–π —Ç–∞ –Ω–∞–¥—ñ–π–Ω–∏–π",
                      "–ô–¥–µ –≤ –∫–µ–π—Å—ñ",
                  ],
              },
              "RH-12Q": {
                  image: "/static/instruments/RH12Q.png",
                  specs: [
                      "–ü—Ä—è–º–∏–π –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä",
                      "2.8 –î–∂ —Å–∏–ª–∞ —É–¥–∞—Ä—É",
                      "–î–æ–¥–∞—Ç–∫–æ–≤–∏–π –ø–∞—Ç—Ä–æ–Ω –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Å–≤–µ—Ä–¥–ª–∞–º–∏",
                      "–ô–¥–µ –≤ –∫–µ–π—Å—ñ",
                  ],
              },
              "RH-16": {
                  image: "/static/instruments/RH16.png",
                  specs: [
                      "–ù–∞–π—Å–∏–ª—å–Ω—ñ—à–∏–π –ø—Ä—è–º–∏–π –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä",
                      "3.4 –î–∂ —Å–∏–ª–∞ —É–¥–∞—Ä—É",
                      "–í–∏–±—ñ—Ä –ø—Ä–æ—Ñ–µ—Å—ñ–æ–Ω–∞–ª—ñ–≤",
                      "–ô–¥–µ –≤ –∫–µ–π—Å—ñ",
                  ],
              },
              "BH-14S": {
                  image: "/static/instruments/BH14S.png",
                  specs: [
                      "–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –±–æ—á–∫–æ–≤–∏–π –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä",
                      "4 –î–∂ —Å–∏–ª–∞ —É–¥–∞—Ä—É",
                      "–ê–Ω—Ç–∏–≤—ñ–±—Ä–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞",
                      "–û–∫—Ä–µ–º–∏–π —Ä–µ–≥—É–ª—è—Ç–æ—Ä –æ–±–µ—Ä—Ç—ñ–≤",
                  ],
              },
              "BH-20": {
                  image: "/static/instruments/BH20.png",
                  specs: [
                      "–ë–æ—á–∫–æ–≤–∏–π –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä",
                      "5.5 –î–∂ —Å–∏–ª–∞ —É–¥–∞—Ä—É",
                      "–í–∏–±—ñ—Ä –ø—Ä–æ—Ñ–µ—Å—ñ–æ–Ω–∞–ª—ñ–≤",
                      "–Ü–Ω–¥–∏–∫–∞—Ü—ñ—ó –º–µ—Ä–µ–∂—ñ —Ç–∞ –∑–Ω–æ—Å—É",
                  ],
              },
              "BH-30": {
                  image: "/static/instruments/BH30.png",
                  specs: [
                      "–ù–∞–π–±—ñ–ª—å—à–∏–π –±–æ—á–∫–æ–≤–∏–π –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä",
                      "9 –î–∂ —Å–∏–ª–∞ —É–¥–∞—Ä—É",
                      "–ó–±—ñ–ª—å—à–µ–Ω–∏–π –ø–∞—Ç—Ä–æ–Ω SDSMAX",
                      "–í–∏–∫–ª—é—á–Ω–æ –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å",
                  ],
              },
              "SAB-14DMINI": {
                  image: "/static/instruments/SAB14DMINI.png",
                  specs: [
                      "–ù–∞–π–º–µ–Ω—à–∏–π –∑–≤–∞—Ä—é–≤–∞–ª—å–Ω–∏–π —ñ–Ω–≤–µ—Ä—Ç–æ—Ä",
                      "–ú–∞—î —Ñ—É–Ω–∫—Ü—ñ—é HOT START",
                      "–í –∫–æ–º–ø–ª–µ–∫—Ç—ñ –π–¥—É—Ç—å –∑–≤–∞—Ä—é–≤–∞–ª—å–Ω—ñ –∫–∞–±–µ–ª—ñ",
                      "–ú–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –µ–ª–µ–∫—Ç—Ä–æ–¥–æ–º 4 –º–º",
                  ],
              },
                "SAB-15DX": {
                  image: "/static/instruments/SAB15DX.png",
                  specs: [
                      "–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π —ñ–Ω–≤–µ—Ä—Ç–æ—Ä",
                      "–ú–∞—î —É—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ –∑–≤–∞—Ä—é–≤–∞–Ω–Ω—è",
                      "–ü—Ä–∞—Ü—é—î –≤ —Ä–µ–∂–∏–º—ñ TIG-LIFT",
                      "–í –∫–æ–º–ø–ª–µ–∫—Ç—ñ –π–¥—É—Ç—å –∑–≤–∞—Ä—é–≤–∞–ª—å–Ω—ñ –∫–∞–±–µ–ª—ñ",
                  ],
              },
                "M-16PW": {
                  image: "/static/instruments/M16PW.png",
                  specs: [
                      "–ù–∞–π–±—ñ–ª—å—à –∑–∞—Ö–∏—â–µ–Ω–∏–π —ñ–Ω–≤–µ—Ä—Ç–æ—Ä",
                      "–ú–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤—ñ–¥ 140 –í–æ–ª—å—Ç –Ω–∞–ø—Ä—É–≥–∏",
                      "–°–∏–Ω—ñ–π —è—Å–∫—Ä–∞–≤–∏–π –¥–∏—Å–ø–ª–µ–π",
                      "–ü—Ä–∞—Ü—é—î –µ–ª–µ–∫—Ç—Ä–æ–¥–∞–º–∏ –¥–æ 4 –º–º",
                  ],
              },
                "SAB-17DX": {
                  image: "/static/instruments/SAB17DX.png",
                  specs: [
                      "–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π —ñ–Ω–≤–µ—Ä—Ç–æ—Ä",
                      "–ú–∞—î —É—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ –∑–≤–∞—Ä—é–≤–∞–Ω–Ω—è",
                      "–ü—Ä–∞—Ü—é—î –≤ —Ä–µ–∂–∏–º—ñ TIG-LIFT",
                      "–ü—Ä–∞—Ü—é—î –µ–ª–µ–∫—Ç—Ä–æ–¥–∞–º–∏ –¥–æ 5 –º–º",
                  ],
              },
                "M-18D": {
                  image: "/static/instruments/M18D.png",
                  specs: [
                      "–ù–∞–¥—ñ–π–Ω–∏–π —ñ–Ω–≤–µ—Ä—Ç–æ—Ä",
                      "5 —Ä–æ–∫—ñ–≤ –≥–∞—Ä–∞–Ω—Ç—ñ—ó –Ω–∞ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç",
                      "–ü—Ä–∞—Ü—é—î –µ–ª–µ–∫—Ç—Ä–æ–¥–∞–º–∏ –¥–æ 5 –º–º",
                      "–ù–µ –º–∞—î —Ñ—É–Ω–∫—Ü—ñ—ó TIG-LIFT –¢–∞ VRD",
                  ],
              },
                "M-20D": {
                  image: "/static/instruments/M20D.png",
                  specs: [
                      "–ù–∞–π–ø–æ—Ç—É–∂–Ω—ñ—à–∏–π —ñ–Ω–≤–µ—Ä—Ç–æ—Ä",
                      "–®–∏—Ä–æ–∫–∏–π –¥–∏—Å–ø–ª–µ–π —ñ–∑ –∑—Ä—É—á–Ω–∏–º –∫–µ—Ä—É–≤–∞–Ω–Ω—è–º",
                      "–í –∫–æ–º–ø–ª–µ–∫—Ç—ñ –π–¥—É—Ç—å –∑–≤–∞—Ä—é–≤–∞–ª—å–Ω—ñ –∫–∞–±–µ–ª—ñ",
                      "–ó–≤–∞—Ä—é—î –º–µ—Ç–∞–ª–∏ —Ç–æ–≤—â–∏–Ω–æ—é –±—ñ–ª—å—à–µ 10 –º–º",
                  ],
              },
                  "DSG-25H": {
                  image: "/static/instruments/25H.png",
                  specs: [
                      "–ù–∞–π–º–µ–Ω—à–∞ –±–µ–Ω–∑–æ–ø–∏–ª–∞",
                      "–ü—ñ–¥—ñ–π–¥–µ –¥–ª—è —Ä–æ–∑–ø–∏–ª—É –¥–æ 25 —Å–º –¥–µ—Ä–µ–≤–∏–Ω–∏",
                      "–®–≤–∏–¥–∫–∏–π —Ç–∞ –∑—Ä—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫",
                      "–°–ø–æ–∂–∏–≤–∞—î 500 –º–ª/–≥–æ–¥ –ø–∞–ª–∏–≤–∞",
                  ],
              },
                  "NSG-45H": {
                  image: "/static/instruments/45H.png",
                  specs: [
                      "–ù–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∞ –±–µ–Ω–∑–æ–ø–∏–ª–∞",
                      "–ü—ñ–¥—ñ–π–¥–µ –¥–ª—è —Ä–æ–∑–ø–∏–ª—É –¥–æ 40 —Å–º –¥–µ—Ä–µ–≤–∏–Ω–∏",
                      "–®–≤–∏–¥–∫–∏–π —Ç–∞ –∑—Ä—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫",
                      "–°–ø–æ–∂–∏–≤–∞—î 1400 –º–ª/–≥–æ–¥ –ø–∞–ª–∏–≤–∞",
                  ],
              },
                  "NSG-52H": {
                  image: "/static/instruments/52H.png",
                  specs: [
                      "–ü–æ–∫—Ä–∞—â–µ–Ω–∞ –±–µ–Ω–∑–æ–ø–∏–ª–∞",
                      "–ü—ñ–¥—ñ–π–¥–µ –¥–ª—è —Ä–æ–∑–ø–∏–ª—É –¥–æ 45 —Å–º –¥–µ—Ä–µ–≤–∏–Ω–∏",
                      "–®–≤–∏–¥–∫–∏–π —Ç–∞ –∑—Ä—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫",
                      "–°–ø–æ–∂–∏–≤–∞—î 1800 –º–ª/–≥–æ–¥ –ø–∞–ª–∏–≤–∞",
                  ],
              },
                  "NSG-62H": {
                  image: "/static/instruments/62H.png",
                  specs: [
                      "–ù–∞–π–±—ñ–ª—å—à–∞ –±–µ–Ω–∑–æ–ø–∏–ª–∞",
                      "–ü—ñ–¥—ñ–π–¥–µ –¥–ª—è —Ä–æ–∑–ø–∏–ª—É –¥–æ 45 —Å–º –¥–µ—Ä–µ–≤–∏–Ω–∏",
                      "–®–≤–∏–¥–∫–∏–π —Ç–∞ –∑—Ä—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫",
                      "–°–ø–æ–∂–∏–≤–∞—î 2100 –º–ª/–≥–æ–¥ –ø–∞–ª–∏–≤–∞",
                  ],
              },
                  "DSE-15T": {
                  image: "/static/instruments/15T.png",
                  specs: [
                      "–ù–∞–π–º–µ–Ω—à–∞ –µ–ª–µ–∫—Ç—Ä–æ–ø–∏–ª–∞",
                      "–ü—ñ–¥—ñ–π–¥–µ –¥–ª—è —Ä–æ–∑–ø–∏–ª—É –¥–æ 30 —Å–º –¥–µ—Ä–µ–≤–∏–Ω–∏",
                      "–ê–≤–∞—Ä—ñ–π–Ω–µ –≥–∞–ª—å–º–æ —Ç–∞ –º–∏—Ç—Ç—î–≤–∞ –∑—É–ø–∏–Ω–∫–∞ –ª–∞–Ω—Ü—é–≥–∞",
                      "–ó—Ä—É—á–Ω–∞ —Ç–∞ –º–æ–±—ñ–ª—å–Ω–∞",
                  ],
              },
                  "DSE-22S": {
                  image: "/static/instruments/22S.png",
                  specs: [
                      "–°–µ—Ä–µ–¥–Ω—è –µ–ª–µ–∫—Ç—Ä–æ–ø–∏–ª–∞",
                      "–ü—ñ–¥—ñ–π–¥–µ –¥–ª—è —Ä–æ–∑–ø–∏–ª—É –¥–æ 35 —Å–º –¥–µ—Ä–µ–≤–∏–Ω–∏",
                      "–ê–≤–∞—Ä—ñ–π–Ω–µ –≥–∞–ª—å–º–æ, –ø–ª–∞–≤–Ω–∏–π –ø—É—Å–∫ —Ç–∞ –º–∏—Ç—Ç—î–≤–∞ –∑—É–ø–∏–Ω–∫–∞ –ª–∞–Ω—Ü—é–≥–∞",
                      "–ß—É–¥–æ–≤–∞ –¥–ª—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ —Ä–æ–∑–ø–∏–ª—É",
                  ],
              },
                  "DSE-24DS": {
                  image: "/static/instruments/24DS.png",
                  specs: [
                      "–ù–∞–π–ø–æ—Ç—É–∂–Ω—ñ—à–∞ –µ–ª–µ–∫—Ç—Ä–æ–ø–∏–ª–∞",
                      "–ü—ñ–¥—ñ–π–¥–µ –¥–ª—è —Ä–æ–∑–ø–∏–ª—É –¥–æ 35 —Å–º –¥–µ—Ä–µ–≤–∏–Ω–∏",
                      "–ê–≤–∞—Ä—ñ–π–Ω–µ –≥–∞–ª—å–º–æ, –ø–ª–∞–≤–Ω–∏–π –ø—É—Å–∫ —Ç–∞ –º–∏—Ç—Ç—î–≤–∞ –∑—É–ø–∏–Ω–∫–∞ –ª–∞–Ω—Ü—é–≥–∞",
                      "–ß—É–¥–æ–≤–∞ –¥–ª—è —Ä–æ–∑–ø–∏–ª—É –ø—ñ–¥ —Ä—ñ–∑–Ω–∏–º–∏ –∫—É—Ç–∞–º–∏",
                  ],
              },
                  "DCS-201BCDUAL": {
                  image: "/static/instruments/201BCDUAL.png",
                  specs: [
                      "–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ 40V –∞–∫—É–º—É–ª—è—Ç–æ—Ä–Ω–∞ –ø–∏–ª–∞",
                      "–ü—ñ–¥—ñ–π–¥–µ –¥–ª—è —Ä–æ–∑–ø–∏–ª—É –¥–æ 35 —Å–º –¥–µ—Ä–µ–≤–∏–Ω–∏",
                      "–ë–µ–∑—â—ñ—Ç–∫–æ–≤–∏–π –¥–≤–∏–≥—É–Ω —Ç–∞ –∑–∞—Ö–∏—Å—Ç–∏",
                      "–ü—Ä–∞—Ü—é—î –≤—ñ–¥ –¥–≤–æ—Ö –∞–∫—É–º—É–ª—è—Ç–æ—Ä—ñ–≤",
                  ],
              },
                  "CS-12": {
                  image: "/static/instruments/CS12.png",
                  specs: [
                      "–ù–∞–π–º–µ–Ω—à–∞ 12V –ø–∏–ª–∞-–≥—ñ–ª–∫–æ—Ä—ñ–∑",
                      "–ü—Ä–∞—Ü—é—î –∑ –≥—ñ–ª–∫–∞–º–∏ –¥–æ 10 –º–º –≤ –¥—ñ–∞–º–µ—Ç—Ä—ñ",
                      "–ë–µ–∑–∫–ª—é—á–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Ç—è–≥—É –ª–∞–Ω—Ü—é–≥–∞",
                      "–ú–∞—î –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–µ—Ä–µ–Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è",
                  ],
              },
                  "DNIPRO-M-43": {
                  image: "/static/instruments/M43.png",
                  specs: [
                      "–ù–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∞ –º–æ—Ç–æ–∫–æ—Å–∞",
                      "–Ü–¥–µ–∞–ª—å–Ω–∏–π –¥–ª—è 15 —Å–æ—Ç–æ–∫",
                      "–ü–æ–≤–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü—ñ—è –¥–ª—è –ø–æ—á–∞—Ç–∫—É —Ä–æ–±–æ—Ç–∏",
                      "–ü—Ä–∞—Ü—é—î –Ω–æ–∂–∞–º–∏ 40–¢ —Ç–∞ —Å—Ç—Ä—É–Ω–æ—é –¥–æ 4.5 –º–º",
                  ],
              },
                  "33M": {
                  image: "/static/instruments/33M.png",
                  specs: [
                      "–ú—É–ª—å—Ç–∏—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç",
                      "–Ü–¥–µ–∞–ª—å–Ω–∏–π –¥–ª—è 5-10 —Å–æ—Ç–æ–∫",
                      "–ö—É—â–æ—Ä—ñ–∑-–≤–∏—Å–æ—Ç–æ—Ä—ñ–∑ –≤ –∫–æ–º–ø–ª–µ–∫—Ç—ñ",
                      "–ü—Ä–∞—Ü—é—î –Ω–æ–∂–∞–º–∏ 40–¢ —Ç–∞ —Å—Ç—Ä—É–Ω–æ—é –¥–æ 3 –º–º",
                  ],
              },
                  "DNIPRO-M-110": {
                  image: "/static/instruments/110.png",
                  specs: [
                      "–ó—Ä—É—á–Ω–∞ —Ç–∞ –ª–µ–≥–∫–∞",
                      "–Ü–¥–µ–∞–ª—å–Ω–∏–π –¥–ª—è 5 —Å–æ—Ç–æ–∫",
                      "–ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–µ—Ä–µ–≥—Ä—ñ–≤—É —Ç–∞ –ø–ª–∞–≤–Ω–∏–π –ø—É—Å–∫",
                      "–ü—Ä–∞—Ü—é—î –Ω–æ–∂–∞–º–∏ 3–¢ —Ç–∞ —Å—Ç—Ä—É–Ω–æ—é –¥–æ 2.4 –º–º",
                  ],
              },
                  "DNIPRO-M-150S": {
                  image: "/static/instruments/150S.png",
                  specs: [
                      "–ó—Ä—É—á–Ω–∞ —Ç–∞ –ª–µ–≥–∫–∞",
                      "–Ü–¥–µ–∞–ª—å–Ω–∏–π –¥–ª—è 5 —Å–æ—Ç–æ–∫",
                      "–ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–µ—Ä–µ–≥—Ä—ñ–≤—É —Ç–∞ –ø–ª–∞–≤–Ω–∏–π –ø—É—Å–∫",
                      "–ü—Ä–∞—Ü—é—î –Ω–æ–∂–∞–º–∏ 3–¢ —Ç–∞ —Å—Ç—Ä—É–Ω–æ—é –¥–æ 2.4 –º–º",
                  ],
              },
                  "30L": {
                  image: "/static/instruments/30L.png",
                  specs: [
                      "–ù–∞–π–ª–µ–≥—à–∏–π —Ç—Ä–∏–º–µ—Ä, 300 –í—Ç",
                      "–Ü–¥–µ–∞–ª—å–Ω–∏–π –¥–ª—è 2 —Å–æ—Ç–æ–∫",
                      "–†–æ–∑–±—ñ—Ä–Ω–∞ 3-—Ö —Å–µ–∫—Ü—ñ–π–Ω–∞ —à—Ç–∞–Ω–≥–∞",
                      "–ü—Ä–∞—Ü—é—î —Å—Ç—Ä—É–Ω–æ—é –¥–æ 1.6 –º–º",
                  ],
              },
                  "DTC-200BCDUAL": {
                  image: "/static/instruments/200BCDUAL.png",
                  specs: [
                      "–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π 40V –∞–∫—É–º—É–ª—è—Ç–æ—Ä–Ω–∏–π —Ç—Ä–∏–º–µ—Ä",
                      "–ü—ñ–¥—ñ–π–¥–µ –¥–ª—è –∫–æ—Å—ñ–Ω–Ω—è –¥–æ 5 —Å–æ—Ç–æ–∫",
                      "–ë–µ–∑—â—ñ—Ç–∫–æ–≤–∏–π –¥–≤–∏–≥—É–Ω —Ç–∞ –∑–∞—Ö–∏—Å—Ç–∏",
                      "–ü—Ä–∞—Ü—é—î –≤—ñ–¥ –¥–≤–æ—Ö –∞–∫—É–º—É–ª—è—Ç–æ—Ä—ñ–≤",
                  ],
              },
                  "DTC-201": {
                  image: "/static/instruments/DTC201.png",
                  specs: [
                      "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –º–æ–±—ñ–ª—å–Ω–∏–π —Ç—Ä–∏–º–µ—Ä",
                      "–ü—ñ–¥—ñ–π–¥–µ –¥–ª—è –∫–æ—Å—ñ–Ω–Ω—è –¥–æ 2 —Å–æ—Ç–æ–∫",
                      "–¢–µ–ª–µ—Å–∫–æ–ø—ñ—á–Ω–∞ —Ç–∞ –ø–æ–≤–æ—Ä–æ—Ç–Ω–∞ —à—Ç–∞–Ω–≥–∞",
                      "–ü—Ä–∞—Ü—é—î —Å—Ç—Ä—É–Ω–æ—é —Ç–∞ –ø–ª–∞—Å—Ç–∏–∫–æ–≤–∏–º–∏ –Ω–æ–∂–∞–º–∏",
                  ],
              },
                  "5-H": {
                  image: "/static/instruments/5H.png",
                  specs: [
                      "–ó—Ä—É—á–Ω–∏–π 5 –ª –æ–±–ø—Ä–∏—Å–∫—É–≤–∞—á",
                      "–õ—ñ—Ç—ñ–π-—ñ–æ–Ω–Ω–∏–π –∞–∫—É–º—É–ª—è—Ç–æ—Ä",
                      "–î–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–æ 4 —Å–æ—Ç–æ–∫",
                      "–¥–æ 150 —Ö–≤ –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏",
                  ],
              },
                  "12S": {
                  image: "/static/instruments/12S.png",
                  specs: [
                      "–°–µ—Ä–µ–¥–Ω—ñ–π 12 –ª –æ–±–ø—Ä–∏—Å–∫—É–≤–∞—á",
                      "–°–≤–∏–Ω—Ü–µ–≤–æ-–∫–∏—Å–ª–æ—Ç–Ω–∏–π –∞–∫—É–º—É–ª—è—Ç–æ—Ä",
                      "–î–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–æ 7 —Å–æ—Ç–æ–∫",
                      "–¥–æ 4 –≥–æ–¥–∏–Ω –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏",
                  ],
              },
                  "16S": {
                  image: "/static/instruments/16S.png",
                  specs: [
                      "–ù–∞–π–±—ñ–ª—å—à–∏–π 16 –ª –æ–±–ø—Ä–∏—Å–∫—É–≤–∞—á",
                      "–°–≤–∏–Ω—Ü–µ–≤–æ-–∫–∏—Å–ª–æ—Ç–Ω–∏–π –∞–∫—É–º—É–ª—è—Ç–æ—Ä",
                      "–î–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–æ 9 —Å–æ—Ç–æ–∫",
                      "–¥–æ 4 –≥–æ–¥–∏–Ω –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏",
                  ],
              }
          };

models.forEach((model) => {
        const data = modelData[model];
        if (!data) return;

        const button = document.createElement("button");
        button.className = "model-button";

        // –§–æ—Ç–æ –º–æ–¥–µ–ª—ñ
        const img = document.createElement("img");
        img.src = data.image;
        img.alt = model;
        img.style.width = "100px";
        img.style.display = "block";
        img.style.margin = "0 auto 10px";
        button.appendChild(img);

        // –ù–∞–∑–≤–∞ –º–æ–¥–µ–ª—ñ
        const title = document.createElement("div");
        title.textContent = model;
        title.style.fontWeight = "bold";
        title.style.textAlign = "center";
        button.appendChild(title);

        // –ö–Ω–æ–ø–∫–∞ "–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ"
        const detailBtn = document.createElement("button");
        detailBtn.className = "detail-view-btn";
        detailBtn.textContent = "–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ";
        detailBtn.onclick = (e) => {
            e.stopPropagation(); // –ó–∞–ø–æ–±—ñ–≥–∞—î–º–æ —Å–ø–ª–∏–≤–∞–Ω–Ω—é –ø–æ–¥—ñ—ó –¥–æ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ—ó –∫–Ω–æ–ø–∫–∏
            showModelDetail(model, data);
        };
        button.appendChild(detailBtn);

        // –û–±—Ä–æ–±–Ω–∏–∫ –∫–ª—ñ–∫—É –Ω–∞ –≤—Å—é –∫–Ω–æ–ø–∫—É
        button.onclick = () => {
            addMessage(`–û–±–∏—Ä–∞—é –º–æ–¥–µ–ª—å: ${model}`, true);
            sendModelChoice(model);
        };

        userInput.disabled = true;
        sendButton.disabled = true;
        recordBtn.disabled = true;
        userInput.placeholder = "–û–±–µ—Ä—ñ—Ç—å –º–æ–¥–µ–ª—å –∑—ñ —Å–ø–∏—Å–∫—É..."; // –î–æ–¥–∞—Ç–∫–æ–≤–∏–π —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä

        modelsButtons.appendChild(button);
    });

    modelOverlay.style.display = "flex";
    userInput.style.display = "none";
    sendButton.style.display = "none";
}

const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);

function showModelDetail(model, data) {
    const modal = document.getElementById("modelDetailModal");
      if (isIOS) {
        // –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ –¥–ª—è iOS
        modal.style.animation = 'none';
        modal.offsetHeight; /* Trigger reflow */
        modal.style.animation = null; 
      }
    const image = document.getElementById("detailModelImage");
    const title = document.getElementById("detailModelTitle");
    const specsList = document.getElementById("detailModelSpecs");
    
    // –ó–∞–ø–æ–≤–Ω—é—î–º–æ –¥–∞–Ω—ñ
    image.src = data.image;
    image.alt = model;
    title.textContent = model;
    
    // –û—á–∏—â–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
    specsList.innerHTML = "";
    
    // –î–æ–¥–∞—î–º–æ –≤—Å—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
    data.specs.forEach(spec => {
        const li = document.createElement("li");
        li.textContent = spec;
        specsList.appendChild(li);
    });
    
    // –ü–æ–∫–∞–∑—É—î–º–æ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∑ –∞–Ω—ñ–º–∞—Ü—ñ—î—é
    modal.style.display = "flex";
    modal.classList.remove("closing");
    
    // –î–æ–¥–∞–º–æ –∞–Ω—ñ–º–∞—Ü—ñ—é –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    image.style.opacity = "0";
    image.style.transform = "translateY(10px)";
    setTimeout(() => {
      image.style.transition = "opacity 0.3s ease-out, transform 0.3s ease-out";
      image.style.opacity = "1";
      image.style.transform = "translateY(0)";
    }, 100);
  }

  function closeModelDetail() {
    const modal = document.getElementById("modelDetailModal");
    modal.classList.add("closing");
    
    // –ó–∞—á–µ–∫–∞—î–º–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∞–Ω—ñ–º–∞—Ü—ñ—ó –ø–µ—Ä–µ–¥ –ø—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è–º
    setTimeout(() => {
      modal.style.display = "none";
    }, 300);
  }

  // –î–æ–¥–∞–º–æ –ø–ª–∞–≤–Ω–∏–π hover-–µ—Ñ–µ–∫—Ç –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ"
  document.querySelectorAll('.detail-view-btn').forEach(btn => {
    btn.addEventListener('mouseenter', () => {
      btn.style.transform = "scale(1.05)";
    });
    btn.addEventListener('mouseleave', () => {
      btn.style.transform = "scale(1)";
    });
  });

function closeModelDetail() {
    document.getElementById("modelDetailModal").style.display = "none";
}

        function hideModelButtons() {
            modelOverlay.style.display = "none";
            userInput.style.display = "block";
            sendButton.style.display = "inline-block";
            modelsButtons.innerHTML = "";
        }

async function sendModelChoice(model) {
    hideModelButtons();
    document.getElementById("choose-model-btn").style.display = "none";
    showTypingIndicator();

    document.getElementById("progressHint").style.display = "none";
    document.getElementById("progressContainer").style.display = "none";

    userInput.disabled = false;
    sendButton.disabled = false;
    recordBtn.disabled = false; 
    userInput.placeholder = "–ù–∞–ø–∏—à—ñ—Ç—å –≤–∞—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..."; // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Ç–µ–∫—Å—Ç
    userInput.focus(); // –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ - —Ñ–æ–∫—É—Å—É—î–º–æ—Å—å –Ω–∞ –ø–æ–ª—ñ –≤–≤–æ–¥—É

    try {
        const response = await fetch("/chat", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message: `–û–±–∏—Ä–∞—é –º–æ–¥–µ–ª—å: ${model}`, seller_name: sellerName }),
            credentials: "include"
        });

        const data = await response.json();

        // –û–Ω–æ–≤–ª—é—î–º–æ stage, —è–∫—â–æ —Å–µ—Ä–≤–µ—Ä –π–æ–≥–æ –ø–æ–≤–µ—Ä–Ω—É–≤
        if (data.stage !== undefined) {
            updateStageIndicator(data.stage);
        }

        // –î–æ–¥–∞—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —Ü–µ –Ω–µ –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ stage 3
        if (!data.stage || data.stage !== 3) {
            addMessage(data.reply, false);
            playVoice(data.reply);
        }

        // –û–±—Ä–æ–±–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ stage 3
        if (data.stage === 3) {
            if (data.model_chosen === false) {
                addMessage("–ù–∞ –∂–∞–ª—å, —Ü—è –º–æ–¥–µ–ª—å –Ω–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å.", false);
            }
            addMessage(data.reply, false);
            playVoice(data.reply);
        }

        // –ü–æ–∫–∞–∑ –º–æ–¥–µ–ª–µ–π –∞–±–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —á–∞—Ç—É
        if (data.show_models && data.models?.length) {
            showModelButtons(data.models, "–û–±–µ—Ä—ñ—Ç—å –º–æ–¥–µ–ª—å:", data.attempts_left || 1);
            modelsButtons.innerHTML = ""
        } else if (data.chat_ended) {
            disableChat();
            if (data.show_restart_button) {
                restartButton.style.display = "inline-block";
            }
        }

    } catch (error) {
        console.error("–ü–æ–º–∏–ª–∫–∞:", error);
        addMessage("–ü–æ–º–∏–ª–∫–∞ –∑–≤'—è–∑–∫—É. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.", false);
    } finally {
        hideTypingIndicator();
    }
}

function createModelButton(model) {
    const button = document.createElement("button");
    button.innerText = model;
    button.onclick = () => {
        addMessage(`–û–±–∏—Ä–∞—é –º–æ–¥–µ–ª—å: ${model}`, true);
        sendModelChoice(model);
    };
    return button;
}

function updateStageIndicator(currentStage) {
  const stageNames = {
    1: "–ï—Ç–∞–ø: –í–∏—è–≤–ª–µ–Ω–Ω—è –ø–æ—Ç—Ä–µ–±–∏",
    2: "–ï—Ç–∞–ø: –í–∏–±—ñ—Ä –º–æ–¥–µ–ª—ñ",
    3: "–ï—Ç–∞–ø: –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É",
    4: "–ï—Ç–∞–ø: –†–æ–±–æ—Ç–∞ —ñ–∑ –∑–∞–ø–µ—Ä–µ—á–µ–Ω–Ω—è–º–∏"
  };

  const stageLabel = document.getElementById('stage-label');
  if (!stageLabel) return;

  stageLabel.textContent = stageNames[currentStage] || "";

  // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∞–Ω—ñ–º–∞—Ü—ñ—ó (—â–æ–± –∫–æ–∂–µ–Ω –Ω–æ–≤–∏–π –µ—Ç–∞–ø –∞–Ω—ñ–º–æ–≤–∞–Ω–æ –æ–Ω–æ–≤–ª—é–≤–∞–≤—Å—è)
  stageLabel.classList.remove('stage'); 
  void stageLabel.offsetWidth; // —Ç—Ä–∏–≥–µ—Ä –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—É
  stageLabel.classList.add('stage');
}

   let sellerName = '';

async function authenticateSeller(name) {
    try {
        const category = document.getElementById("tool-category").value;

        const response = await fetch("/authenticate", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                seller_name: name,
                category: category
            }),
            credentials: "include"
        });

        const data = await response.json();
        return data;
    } catch (error) {
        console.error("–ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó:", error);
        return { error: "–ü–æ–º–∏–ª–∫–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è" };
    }
}

  // –ü–æ–∫–∞–∑—É—î–º–æ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –≤–≤–µ–¥–µ–Ω–Ω—è –ü–Ü–ë –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
  document.addEventListener('DOMContentLoaded', () => {
    const authModal = document.getElementById('auth-modal');
    const rulesModal = document.getElementById('rules-modal');
    const nameInput = document.getElementById('seller-name-input');
    const categoryInput = document.getElementById('tool-category');
    const submitButton = document.getElementById('submit-name-btn');

    // –ü—Ä–∏—Ö–æ–≤—É—î–º–æ –≤—ñ–∫–Ω–æ –ø—Ä–∞–≤–∏–ª —Å–ø–æ—á–∞—Ç–∫—É
    rulesModal.style.display = 'none';

    // –ü–æ–∫–∞–∑—É—î–º–æ –≤—ñ–∫–Ω–æ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
    authModal.style.display = 'flex';

    // –û–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏"
    submitButton.addEventListener('click', async () => {
        const name = nameInput.value.trim();
        const category = categoryInput.value;

        if (!category) {
            alert("–ë—É–¥—å –ª–∞—Å–∫–∞, –æ–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É.");
            categoryInput.focus();
            return;
        }

        if (!name) {
            alert("–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –≤–∞—à–µ –ü–Ü–ë.");
            nameInput.focus();
            return;
        }

        // –ë–ª–æ–∫—É—î–º–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—ñ–¥ —á–∞—Å –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
        nameInput.disabled = true;
        categoryInput.disabled = true;
        submitButton.disabled = true;

        const result = await authenticateSeller(name);

        if (result.error) {
            alert("–ü–æ–º–∏–ª–∫–∞: " + result.error);
            nameInput.disabled = false;
            categoryInput.disabled = false;
            submitButton.disabled = false;
        } else {
            sellerName = name;
            authModal.style.display = 'none';
            rulesModal.style.display = 'flex';
        }
    });
});

function playVoice(text) {
  fetch("/speak", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ text })
  })
  .then(res => res.blob())
  .then(blob => {
    const url = URL.createObjectURL(blob);
    const audio = new Audio(url);
    audio.play();
  })
  .catch(err => console.error("TTS error:", err));
}

let isCooldown = false;

async function sendMessage() {
    const message = userInput.value.trim();
    if (!sellerName) {
        alert("–ë—É–¥—å –ª–∞—Å–∫–∞, —Å–ø–æ—á–∞—Ç–∫—É –≤–≤–µ–¥—ñ—Ç—å –≤–∞—à—ñ –¥–∞–Ω—ñ");
        return;
    }

    if (!message) return; // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –ø–æ—Ä–æ–∂–Ω—ñ–π —Ä—è–¥–æ–∫

    addMessage(message, true); // –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ–¥–∞–≤—Ü—è
    userInput.value = '';
    showTypingIndicator();
    statusElement.textContent = "–ö–ª—ñ—î–Ω—Ç –Ω–∞–±–∏—Ä–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å...";

    isCooldown = true;
    userInput.disabled = true;
    sendButton.disabled = true;
    setTimeout(() => {
        isCooldown = false;
        userInput.disabled = false;
        sendButton.disabled = false;
        statusElement.textContent = "";
    }, 4000);

    try {
        const response = await fetch('/chat', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ message, seller_name: sellerName }),
            credentials: "include"
        });

        if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
        const data = await response.json();

        // –û–±—Ä–æ–±–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
        if (data.error) {
            statusElement.textContent = "–ü–æ–º–∏–ª–∫–∞: " + data.error;
            if (data.chat_ended) disableChat();
            return;
        }

        if (data.show_restart_button) {
            restartButton.style.display = "inline-block";
        } else {
            restartButton.style.display = "none";
        }

        if (data.hide_choose_model_btn) {
            document.getElementById("choose-model-btn").style.display = "none";
        }

        // --- –ù–æ–≤–∞ –ª–æ–≥—ñ–∫–∞ –¥–ª—è –µ—Ç–∞–ø—É 3 (—Ç–µ—Ö–Ω—ñ—á–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è) ---
        if (data.stage === 3) {
            addMessage(data.reply, false);
            statusElement.textContent = "–ö–ª—ñ—î–Ω—Ç —É—Ç–æ—á–Ω—é—î –¥–µ—Ç–∞–ª—ñ –ø—Ä–æ –º–æ–¥–µ–ª—å...";
            userInput.focus();
            playVoice(data.reply);   // ‚úÖ —Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è data

            // –î–æ–¥–∞—î–º–æ –ø–∏—Ç–∞–Ω–Ω—è –ø–æ –æ–¥–Ω–æ–º—É –∑ –∑–∞—Ç—Ä–∏–º–∫–æ—é
            questions.forEach((question, index) => {
                setTimeout(() => {
                    addMessage(question, false);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }, index * 1000);
            });
        } else {
            // –î–ª—è —ñ–Ω—à–∏—Ö –µ—Ç–∞–ø—ñ–≤ - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –æ–±—Ä–æ–±–∫–∞
            addMessage(data.reply, false);
            playVoice(data.reply);   // ‚úÖ —Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è data
        }

        // –û–±—Ä–æ–±–∫–∞ –µ—Ç–∞–ø—É –≤–∏–±–æ—Ä—É –º–æ–¥–µ–ª—ñ
        if (data.show_models) {
            showModelButtons(data.models, "–û–±–µ—Ä—ñ—Ç—å –º–æ–¥–µ–ª—å:", data.attempts_left);
        }

        if (data.show_model_button) {
            document.getElementById("choose-model-btn").classList.remove("hidden");
        }

        if (data.stage !== undefined) {
            updateStageIndicator(data.stage);
        }

        if (data.stage === 3) {
            statusElement.textContent = "–ö–ª—ñ—î–Ω—Ç —É—Ç–æ—á–Ω—é—î –¥–µ—Ç–∞–ª—ñ –ø—Ä–æ –º–æ–¥–µ–ª—å...";
            userInput.focus();
        }

        if (data.question_progress !== undefined) {
            updateProgressBar(data.question_progress, 5);
        }

        if (data.chat_ended) {
            disableChat();
            if (data.model_chosen) {
                setTimeout(() => {
                    addMessage("–î—è–∫—É—é! –Ø –±–µ—Ä—É —Ü—é –º–æ–¥–µ–ª—å.", false);
                }, 1000);
            }
        } else {
            statusElement.textContent = "";
        }

    } catch (error) {
        console.error("–ü–æ–º–∏–ª–∫–∞:", error);
        statusElement.textContent = "–ü–æ–º–∏–ª–∫–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è";
        addMessage("–í–∏–±–∞—á—Ç–µ, —Å—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.", false);
    } finally {
        hideTypingIndicator();
    }
}

let mediaRecorder;
let audioChunks = [];

const recordBtn = document.getElementById("record-btn");
const recordingIndicator = document.getElementById("recording-indicator");

recordBtn.addEventListener("click", async () => {
  if (!mediaRecorder || mediaRecorder.state === "inactive") {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
      mediaRecorder = new MediaRecorder(stream);

      mediaRecorder.ondataavailable = event => {
        audioChunks.push(event.data);
      };

      mediaRecorder.onstop = async () => {
        recordingIndicator.style.display = "none";
        mediaRecorder.stream.getTracks().forEach(track => track.stop());

        const audioBlob = new Blob(audioChunks, { type: "audio/webm" });
        audioChunks = [];

        const formData = new FormData();
        formData.append("file", audioBlob, "voice.webm");

        try {
          const response = await fetch("/speech-to-text", {
            method: "POST",
            body: formData
          });

          if (!response.ok) {
            addMessage("‚ùå –ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è", false);
            return;
          }

          const data = await response.json();
          if (data.error) {
            addMessage("‚ùå " + data.error, false);
          } else if (data.text) {
            userInput.value = data.text;   // —Ç—ñ–ª—å–∫–∏ –≤—Å—Ç–∞–≤–ª—è—î–º–æ —É –ø–æ–ª–µ
            sendMessage();                 // —ñ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ (–±–µ–∑ –¥—É–±–ª—é–≤–∞–Ω–Ω—è addMessage)
          } else {
            addMessage("‚ùå –í—ñ–¥–ø–æ–≤—ñ–¥—å –±–µ–∑ —Ç–µ–∫—Å—Ç—É", false);
          }
        } catch (err) {
          console.error("STT fetch error:", err);
          addMessage("‚ùå –ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –≥–æ–ª–æ—Å—É", false);
              }
      };

      mediaRecorder.start();
      recordBtn.textContent = "‚èπ –ó—É–ø–∏–Ω–∏—Ç–∏";
      recordingIndicator.style.display = "block";
    } catch (err) {
      console.error("Mic error:", err);
      addMessage("‚ùå –ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞", false);
    }
  } else {
    mediaRecorder.stop();
    recordBtn.textContent = "üé§";
  }
});

    // –°—Ç–∞—Ä—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
    document.getElementById('accept-rules-btn').addEventListener('click', async () => {
      const rulesModal = document.getElementById('rules-modal');
      rulesModal.style.display = 'none';

      // –ü–æ—á–∏–Ω–∞—î–º–æ —á–∞—Ç
      try {
        const response = await fetch("/start_chat");
        const data = await response.json();

        if (data.reply) {
          addMessage(data.reply, false);
          playVoice(data.reply);     // –¥–æ–¥–∞—î–º–æ –ø–µ—Ä—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
          unblockChat();                       // —Ä–æ–∑–±–ª–æ–∫–æ–≤—É—î–º–æ –ø–æ–ª–µ –≤–≤–æ–¥—É
          userInput.focus();
          showStageIndicator();                // –ø–æ–∫–∞–∑—É—î–º–æ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –µ—Ç–∞–ø—ñ–≤

          // –ó–º—ñ–Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞
      const clientCharacter = document.getElementById("client-character");
      const clientAvatar = document.getElementById("client-avatar");

      if (data.avatar) {
        clientAvatar.src = `/static/avatars/${data.avatar}`;
      }
      clientCharacter.style.display = "block";
      {
          }
        }
      } catch (err) {
        console.error("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ —á–∞—Ç—É:", err);
        addMessage("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ —á–∞—Ç—É. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.", false);
      }
    });

    document.querySelector(".model-detail-close").addEventListener("click", closeModelDetail);

    document.getElementById("modelDetailModal").addEventListener("click", function(e) {
        if (e.target === this) {
            closeModelDetail();
        }
    });

      document.addEventListener('DOMContentLoaded', function() {
        const closeHintBtn = document.getElementById("close-hint-btn");
        if (closeHintBtn) {
            closeHintBtn.addEventListener("click", hideModelHint);
        } else {
            console.error("–ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è –ø—ñ–¥–∫–∞–∑–∫–∏ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞");
        }
    });

document.getElementById("choose-model-btn").addEventListener("click", async () => {
    try {
        const response = await fetch("/show_models", { method: "POST" });
        const data = await response.json();

        if (data.models && data.models.length) {
            showModelButtons(data.models);
            document.getElementById("choose-model-btn").classList.add("hidden");
        }
    } catch (err) {
        addMessage("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –º–æ–¥–µ–ª–µ–π. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.", false);
    }
});

    document.getElementById("close-model-overlay").addEventListener("click", () => {
        hideModelButtons(); // ‚ùå –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î–º–æ sendModelChoice()
        document.getElementById("choose-model-btn").classList.remove("hidden"); // –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –∫–Ω–æ–ø–∫—É
    });

    </script>
</body>
</html>